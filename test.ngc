%
/N1 G01 X0 Y0 Z0 (a deleted block)
N2 G01 X1 Y1 Z1 (normal block)

#a = #b (error, #b hasn't been declared yet)
#b = 2 + 3
#a = #b

sub foo[#x, #y, #x] (error, #x already declared)
    #a = 1 (no error, refers to #a declared previously)
    #b = #x (no error, #x is declared because it's a parameter)
    #y = #c (error, #c not declared)

    sub bar[#z]
        #blah = #z + #y (no error, refers to foo's parameter #y)
    endsub

    #d = #blah (error, #blah is in bar's scope)
endsub

#bar = foo[#a, 37]

alias #_current_tool = 5400 (this essentially makes #_current_tool the same as #5400, these can be put in a g-code preamble or something to simplify the c++ side)
alias #_current_tool = 5401 (change it)
#tool = #_current_tool

sub twice[]
endsub

sub twice[] (error, redefined)
endsub

sub twice[#x] (ok, overload)
endsub

twice[] (ok)
twice[0] (ok, overload with 1 param defined)
twice[0, 0] (error, overload with 2 params not defined)

sin[360] (ok, added from c++)

#test = #_g54_x (ok, defined in preamble)

M30
%